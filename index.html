<!-- <!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anime Platforma</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1 class="sdf">Anime Platforma</h1>
    <div class="profile">
      <a href="admin-panal.html">Profil</a>
    </div>
  </header>

  <section class="search-section">
    <input type="text" id="searchInput" autocomplete="off" placeholder="Anime qidiring..." onkeyup="searchVideos()">
  </section>

  <section class="video-list">
    <h2 class="wer">Tavsiya etilgan anime</h2>
    <div id="videoContainer"></div>
  </section>

  <script>
    function displayVideos() {
      const videoContainer = document.getElementById("videoContainer");
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      const views = JSON.parse(localStorage.getItem("views")) || {};

      videoContainer.innerHTML = "";

      videos.forEach((video, index) => {
        const viewCount = views[video.title] || 0;

        const el = document.createElement("div");
        el.classList.add("video-item");
        el.innerHTML = `
         <img src="${video.img || 'default.jpg'}" alt="${video.title}" width="275 height="200">
          <h3>${video.title}</h3>
          <p>Ko‘rishlar: <span id="views-${index}">${viewCount}</span></p>
          <a href="${video.link}" target="_blank" onclick="increaseView('${video.title}', ${index})">Ko‘rish</a>
        `;
        videoContainer.appendChild(el);
      });
    }

    function increaseView(title, index) {
      let views = JSON.parse(localStorage.getItem("views")) || {};
      views[title] = (views[title] || 0) + 1;
      localStorage.setItem("views", JSON.stringify(views));
      document.getElementById(`views-${index}`).innerText = views[title];
    }

    function searchVideos() {
      const input = document.getElementById("searchInput").value.toLowerCase();
      const videoContainer = document.getElementById("videoContainer");
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      const views = JSON.parse(localStorage.getItem("views")) || {};

      videoContainer.innerHTML = "";

      const filtered = videos.filter(v => v.title.toLowerCase().includes(input));
    
  filtered.forEach((video, index) => {
        const viewCount = views[video.title] || 0;

        const el = document.createElement("div");
        el.classList.add("video-item");
        el.innerHTML = `
          <img src="${video.img}" alt="${video.title}" width="100%">
          <h3>${video.title}</h3>
          <p>Ko‘rishlar: <span id="views-${index}">${viewCount}</span></p>
          <a href="${video.link}" target="_blank" onclick="increaseView('${video.title}', ${index})">Ko‘rish</a>
        `;
        videoContainer.appendChild(el);
      });
    }

    window.onload = displayVideos;
  </script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anime Platforma</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1 class="sdf">Anime Platforma</h1>
    <div class="profile">
      <a href="admin-panal.html">Profil</a>
    </div>
  </header>

  <section class="search-section">
    <input type="text" id="searchInput" autocomplete="off" placeholder="Anime qidiring..." onkeyup="searchVideos()">
  </section>

  <section class="video-list">
    <h2 class="wer">Tavsiya etilgan anime</h2>
    <div id="videoContainer"></div>
  </section>

  <script>
    function displayVideos() {
      const videoContainer = document.getElementById("videoContainer");
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      const views = JSON.parse(localStorage.getItem("views")) || {};

      videoContainer.innerHTML = "";

      videos.forEach((video, index) => {
        const viewCount = views[video.title] || 0;

        const el = document.createElement("div");
        el.classList.add("video-item");
        el.innerHTML = `
          <img src="${video.img || 'default.jpg'}" alt="${video.title}" width="275" height="200">
          <h3>${video.title}</h3>
          <p>Ko‘rishlar: <span id="views-${index}">${viewCount}</span></p>
          <a href="${video.link}" target="_blank" onclick="increaseView('${video.title}', ${index})">Ko‘rish</a>
        `;
        videoContainer.appendChild(el);
      });
    }

    function increaseView(title, index) {
      let views = JSON.parse(localStorage.getItem("views")) || {};
      views[title] = (views[title] || 0) + 1;
      localStorage.setItem("views", JSON.stringify(views));
      document.getElementById(`views-${index}`).innerText = views[title];
    }

    function searchVideos() {
      const input = document.getElementById("searchInput").value.toLowerCase();
      const videoContainer = document.getElementById("videoContainer");
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      const views = JSON.parse(localStorage.getItem("views")) || {};

      videoContainer.innerHTML = "";

      const filtered = videos.filter(v => v.title.toLowerCase().includes(input));
      filtered.forEach((video, index) => {
        const viewCount = views[video.title] || 0;

        const el = document.createElement("div");
        el.classList.add("video-item");
        el.innerHTML = `
          <img src="${video.img}" alt="${video.title}" width="100%">
          <h3>${video.title}</h3>
          <p>Ko‘rishlar: <span id="views-${index}">${viewCount}</span></p>
          <a href="${video.link}" target="_blank" onclick="increaseView('${video.title}', ${index})">Ko‘rish</a>
        `;
        videoContainer.appendChild(el);
      });
    }

    window.onload = displayVideos;
  </script>
</body>
</html>
