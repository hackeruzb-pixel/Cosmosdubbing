<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Paneli</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1 class="asd">Admin Paneli</h1>
    <a href="index.html" class="back-button">üè† Bosh sahifa</a>
  </header>

  <section class="admin-form">
    <input type="text" id="title" placeholder="Anime nomi" class="dfg" />
    <input type="text" id="link" placeholder="Telegram video linki" class="dfgh" />
    <button onclick="addVideo()">Qo‚Äòshish</button>
  </section>

  <section class="admin-videos" id="adminVideoList"></section>

  <script>
    function loadVideos() {
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      const container = document.getElementById("adminVideoList");
      container.innerHTML = "";

      videos.forEach((video, index) => {
        const div = document.createElement("div");
        div.className = "video-item";
        div.innerHTML = `
          <h3>${video.title}</h3>
          <div class="btn-group">
            <button onclick="editVideo(${index})">‚úèÔ∏è Edit</button>
            <button onclick="deleteVideo(${index})">üóëÔ∏è O‚Äòchirish</button>
          </div>
        `;
        container.appendChild(div);
      });
    }

    function addVideo() {
      const title = document.getElementById("title").value.trim();
      const link = document.getElementById("link").value.trim();
      if (!title || !link) return alert("Maydonlar to‚Äòldirilishi shart!");

      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      videos.push({ title, link });
      localStorage.setItem("videos", JSON.stringify(videos));
      document.getElementById("title").value = "";
      document.getElementById("link").value = "";
      loadVideos();
    }

    function deleteVideo(index) {
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      videos.splice(index, 1);
      localStorage.setItem("videos", JSON.stringify(videos));
      loadVideos();
    }

    function editVideo(index) {
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      const updated = prompt("Yangi nom:", videos[index].title);
      if (updated) {
        videos[index].title = updated;
        localStorage.setItem("videos", JSON.stringify(videos));
        loadVideos();
      }
    }

    window.onload = loadVideos;
  </script>

  <script>
    if (sessionStorage.getItem("auth") !== "true") {
      window.location.href = "admin-login.html";
    }
  </script>

</body>
</html>
