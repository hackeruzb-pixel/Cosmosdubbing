<!-- <!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Paneli</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1 class="asd">Admin Paneli</h1>
    <a href="index.html" class="back-button">üè† Bosh sahifa</a>
  </header>

  <section class="admin-form">
    <input type="text" id="title" placeholder="Anime nomi" />
    <input type="text" id="link" placeholder="Telegram video linki" />
    <input type="text" id="img" placeholder="Anime rasmi (poster) URL" width="390" height="200" />
    <button onclick="addVideo()">Qo‚Äòshish</button>
  </section>

  <section class="admin-videos" id="adminVideoList"></section>

  <script>
    function loadVideos() {
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      const container = document.getElementById("adminVideoList");
      container.innerHTML = "";

      videos.forEach((video, index) => {
        const div = document.createElement("div");
        div.className = "video-item";
        div.innerHTML = `
          <img src="${video.img}" alt="${video.title}" width="100%">
          <h3>${video.title}</h3>
          <div class="btn-group">
            <button onclick="editVideo(${index})">‚úèÔ∏è Edit</button>
            <button onclick="deleteVideo(${index})">üóë O‚Äòchirish</button>
          </div>
        `;
        container.appendChild(div);
      });
    }

    function addVideo() {
      const title = document.getElementById("title").value.trim();
      const link = document.getElementById("link").value.trim();
      const img = document.getElementById("img").value.trim();

      if (!title || !link || !img) return alert("Barcha maydonlarni to‚Äòldiring!");

      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      videos.push({ title, link, img });
      localStorage.setItem("videos", JSON.stringify(videos));

      document.getElementById("title").value = "";
      document.getElementById("link").value = "";
      document.getElementById("img").value = "";

      loadVideos();
    }

    function deleteVideo(index) {
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      videos.splice(index, 1);
      localStorage.setItem("videos", JSON.stringify(videos));
      loadVideos();
    }

    function editVideo(index) {
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      const updated = prompt("Yangi nom:", videos[index].title);
      if (updated) {
        videos[index].title = updated;
        localStorage.setItem("videos", JSON.stringify(videos));
        loadVideos();
      }
    }

    if (sessionStorage.getItem("auth") !== "true") {
      window.location.href = "admin-login.html";
    }

    window.onload = loadVideos;
  </script>
</body>
</html> -->


<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Paneli</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1 class="asd">Admin Paneli</h1>
    <a href="index.html" class="back-button">üè† Bosh sahifa</a>
  </header>

  <section class="admin-form">
    <input type="text" id="title" placeholder="Anime nomi" />
    <input type="text" id="link" placeholder="Telegram video linki" />
    <input type="text" id="img" placeholder="Anime rasmi (poster) URL" />
    <button onclick="addVideo()">Qo‚Äòshish</button>
  </section>

  <section class="admin-videos" id="adminVideoList"></section>

  <script>
    // Videolarni yuklash va ko'rsatish
    function loadVideos() {
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      const container = document.getElementById("adminVideoList");
      container.innerHTML = "";

      videos.forEach((video, index) => {
        const div = document.createElement("div");
        div.className = "video-item";
        div.innerHTML = `
          <img src="${video.img}" alt="${video.title}" width="100%">
          <h3>${video.title}</h3>
          <p>Ko‚Äòrishlar soni: ${video.views || 0}</p>
          <div class="btn-group">
            <button onclick="editVideo(${index})">‚úèÔ∏è Tahrirlash</button>
            <button onclick="deleteVideo(${index})">üóë O‚Äòchirish</button>
          </div>
        `;
        container.appendChild(div);
      });
    }

    // Yangi video qo‚Äòshish
    function addVideo() {
      const title = document.getElementById("title").value.trim();
      const link = document.getElementById("link").value.trim();
      const img = document.getElementById("img").value.trim();

      if (!title || !link || !img) return alert("Barcha maydonlarni to‚Äòldiring!");

      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      videos.push({ title, link, img, views: 0 });
      localStorage.setItem("videos", JSON.stringify(videos));

      // Maydonlarni tozalash
      document.getElementById("title").value = "";
      document.getElementById("link").value = "";
      document.getElementById("img").value = "";

      loadVideos();
    }

    // Video o‚Äòchirish
    function deleteVideo(index) {
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      videos.splice(index, 1);
      localStorage.setItem("videos", JSON.stringify(videos));
      loadVideos();
    }

    // Video tahrirlash
    function editVideo(index) {
      const videos = JSON.parse(localStorage.getItem("videos")) || [];
      const updatedTitle = prompt("Yangi nom:", videos[index].title);
      if (updatedTitle) {
        videos[index].title = updatedTitle;
        localStorage.setItem("videos", JSON.stringify(videos));
        loadVideos();
      }
    }

    // Foydalanuvchi autentifikatsiyasini tekshirish
    if (sessionStorage.getItem("auth") !== "true") {
      window.location.href = "admin-login.html";
    }

    window.onload = loadVideos;
  </script>
</body>
</html>
